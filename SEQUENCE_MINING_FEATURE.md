# é«˜é¢‘å­åºåˆ—æŒ–æ˜åŠŸèƒ½å¼€å‘æ€»ç»“

## ğŸ“‹ åŠŸèƒ½æ¦‚è¿°

æ–°å¢äº†"é«˜é¢‘å­åºåˆ—æŒ–æ˜"åŠŸèƒ½ï¼ŒåŸºäºäº‹ä»¶æå–çš„æ•°æ®ï¼Œä½¿ç”¨PrefixSpanæˆ–Attentionæƒé‡ç®—æ³•å‘ç°é«˜é¢‘å­åºåˆ—æ¨¡å¼ã€‚

---

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. å‰ç«¯é¡µé¢å¼€å‘

**æ–‡ä»¶**: [frontend/src/views/SequenceMining.vue](file:///home/linxiankun/adsagent/frontend/src/views/SequenceMining.vue)

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… ç®—æ³•é€‰æ‹©ï¼ˆPrefixSpan / Attentionæƒé‡ï¼‰
- âœ… å‚æ•°é…ç½®ï¼ˆæœ€å°æ”¯æŒåº¦ã€æœ€å¤§åºåˆ—é•¿åº¦ã€è¿”å›æ¨¡å¼æ•°é‡ï¼‰
- âœ… å‚æ•°è¯´æ˜ï¼ˆæ¯ä¸ªå‚æ•°éƒ½æœ‰è¯¦ç»†çš„è¯´æ˜å’Œæç¤ºï¼‰
- âœ… è¯¦ç»†è¿›åº¦æ˜¾ç¤ºï¼ˆåŠ è½½åºåˆ—ã€æ‰§è¡Œç®—æ³•ã€æ ¼å¼åŒ–ç»“æœï¼‰
- âœ… è¡¨æ ¼å±•ç¤ºæŒ–æ˜ç»“æœ
- âœ… é€‰æ‹©ä¿å­˜æ¨¡å¼åŠŸèƒ½
- âœ… æŸ¥çœ‹å·²ä¿å­˜æ¨¡å¼
- âœ… æŸ¥çœ‹æ¨¡å¼ç¤ºä¾‹
- âœ… åˆ é™¤å·²ä¿å­˜æ¨¡å¼
- âœ… äº‹ä»¶æ•°æ®æ£€æµ‹ï¼ˆæœªæ£€æµ‹åˆ°äº‹ä»¶æ•°æ®æ—¶æç¤ºï¼‰
- âœ… æ˜ç¡®çš„é”™è¯¯æç¤º

**UIè®¾è®¡**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é«˜é¢‘å­åºåˆ—æŒ–æ˜                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä½¿ç”¨è¯´æ˜                                â”‚
â”‚  1. é€‰æ‹©æŒ–æ˜ç®—æ³•å’Œå‚æ•°                   â”‚
â”‚  2. ç‚¹å‡»"å¼€å§‹æŒ–æ˜"æŒ‰é’®                   â”‚
â”‚  3. æŸ¥çœ‹æŒ–æ˜ç»“æœï¼Œé€‰æ‹©æ„Ÿå…´è¶£çš„æ¨¡å¼ä¿å­˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç®—æ³•é€‰æ‹©: [PrefixSpan â–¼]               â”‚
â”‚  æœ€å°æ”¯æŒåº¦: [2] (?)                     â”‚
â”‚  æœ€å¤§åºåˆ—é•¿åº¦: [5] (?)                   â”‚
â”‚  è¿”å›æ¨¡å¼æ•°é‡: [20] (?)                  â”‚
â”‚                                          â”‚
â”‚  [å¼€å§‹æŒ–æ˜] [é‡ç½®å‚æ•°] [æŸ¥çœ‹å·²ä¿å­˜æ¨¡å¼]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŒ–æ˜è¿›åº¦                                â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘ 80%                 â”‚
â”‚  æ­£åœ¨æ ¼å¼åŒ–ç»“æœ...                       â”‚
â”‚  å‘ç° 2 ä¸ªé«˜é¢‘æ¨¡å¼                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŒ–æ˜ç»Ÿè®¡ä¿¡æ¯                            â”‚
â”‚  æ€»ç”¨æˆ·æ•°: 47  äº‹ä»¶ç±»å‹æ•°: 49            â”‚
â”‚  å¹³å‡åºåˆ—é•¿åº¦: 2.26  å‘ç°æ¨¡å¼æ•°: 2       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æŒ–æ˜ç»“æœ (å…± 2 ä¸ªæ¨¡å¼)  [ä¿å­˜é€‰ä¸­æ¨¡å¼]  â”‚
â”‚  â˜ æ’å äº‹ä»¶åºåˆ— æ”¯æŒåº¦ æ”¯æŒç‡ ç”¨æˆ·æ•°    â”‚
â”‚  â˜ 1    [åŠ è´­è±ªè½¦]â†’[åŠ è´­è±ªè½¦] 3 6.4% 3  â”‚
â”‚  â˜ 2    [ç‚¹å‡»è½¦å‹]â†’[æµè§ˆè½¦å‹] 2 4.3% 2  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. è·¯ç”±å’Œèœå•é…ç½®

**ä¿®æ”¹æ–‡ä»¶**:
- [frontend/src/router/index.js](file:///home/linxiankun/adsagent/frontend/src/router/index.js) - æ·»åŠ è·¯ç”±
- [frontend/src/App.vue](file:///home/linxiankun/adsagent/frontend/src/App.vue) - æ·»åŠ èœå•

**èœå•é¡ºåº**:
1. åŸºç¡€å»ºæ¨¡
2. äº‹ä»¶æŠ½è±¡
3. **é«˜é¢‘å­åºåˆ—æŒ–æ˜** â† æ–°å¢
4. æ™ºèƒ½é—®ç­”

### 3. åç«¯APIä¼˜åŒ–

**ä¿®æ”¹æ–‡ä»¶**: [backend/app/api/sequence_mining_routes.py](file:///home/linxiankun/adsagent/backend/app/api/sequence_mining_routes.py)

**ä¿®æ”¹å†…å®¹**:
- ä¿®æ­£APIè·¯ç”±å‰ç¼€ï¼š`/sequence-mining` â†’ `/mining`
- ä¿æŒä¸å‰ç«¯APIè°ƒç”¨ä¸€è‡´

**æ–°å¢API**: [backend/app/api/event_extraction_routes.py](file:///home/linxiankun/adsagent/backend/app/api/event_extraction_routes.py)

**æ–°å¢æ¥å£**:
```python
@router.get("/stats")
async def get_event_stats():
    """è·å–äº‹ä»¶ç»Ÿè®¡ä¿¡æ¯"""
    # è¿”å›: total_events, unique_event_types, user_count, event_types
```

---

## ğŸ”§ APIæ¥å£è¯´æ˜

### 1. æŒ–æ˜é«˜é¢‘å­åºåˆ—
```http
POST /api/v1/mining/mine
Content-Type: application/json

{
  "algorithm": "prefixspan",  // æˆ– "attention"
  "min_support": 2,
  "max_length": 5,
  "top_k": 20
}
```

**å“åº”**:
```json
{
  "code": 0,
  "message": "æŒ–æ˜å®Œæˆ",
  "data": {
    "algorithm": "prefixspan",
    "frequent_patterns": [
      {
        "pattern": ["åŠ è´­è±ªè½¦", "åŠ è´­è±ªè½¦"],
        "support": 3,
        "frequency": 0.0638,
        "length": 2,
        "description": "ç”¨æˆ·åœ¨åŠ è´­è±ªè½¦å,é€šå¸¸ä¼šåŠ è´­è±ªè½¦"
      }
    ],
    "statistics": {
      "total_users": 47,
      "unique_event_types": 49,
      "avg_sequence_length": 2.26,
      "patterns_found": 2
    }
  }
}
```

### 2. ä¿å­˜æ¨¡å¼
```http
POST /api/v1/mining/patterns/save
Content-Type: application/json

{
  "patterns": [...],  // é€‰ä¸­çš„æ¨¡å¼åˆ—è¡¨
  "algorithm": "prefixspan",
  "min_support": 2
}
```

### 3. æŸ¥çœ‹å·²ä¿å­˜æ¨¡å¼
```http
GET /api/v1/mining/patterns/saved?limit=100&offset=0
```

### 4. æŸ¥çœ‹æ¨¡å¼ç¤ºä¾‹
```http
POST /api/v1/mining/patterns/{pattern_id}/examples?limit=5
```

### 5. åˆ é™¤æ¨¡å¼
```http
DELETE /api/v1/mining/patterns/{pattern_id}
```

### 6. äº‹ä»¶ç»Ÿè®¡
```http
GET /api/v1/events/stats
```

---

## ğŸ“Š ç®—æ³•è¯´æ˜

### PrefixSpanç®—æ³•
- **ç‰¹ç‚¹**: ç»å…¸çš„åºåˆ—æ¨¡å¼æŒ–æ˜ç®—æ³•
- **é€‚ç”¨åœºæ™¯**: å‘ç°é¢‘ç¹å‡ºç°çš„å­åºåˆ—
- **å‚æ•°**:
  - `min_support`: æœ€å°æ”¯æŒåº¦ï¼ˆæ¨¡å¼å‡ºç°çš„æœ€å°æ¬¡æ•°ï¼‰
  - `max_length`: æœ€å¤§åºåˆ—é•¿åº¦ï¼ˆå»ºè®®3-5ï¼‰

### Attentionæƒé‡ç®—æ³•
- **ç‰¹ç‚¹**: åŸºäºäº‹ä»¶å…±ç°é¢‘ç‡çš„æƒé‡æ–¹æ³•
- **é€‚ç”¨åœºæ™¯**: å‘ç°å…³è”æ€§å¼ºçš„äº‹ä»¶åºåˆ—
- **å‚æ•°**:
  - `min_support`: æœ€å°æ”¯æŒåº¦
  - `max_length`: æœ€å¤§åºåˆ—é•¿åº¦

---

## âœ… æµ‹è¯•éªŒè¯

### åç«¯APIæµ‹è¯•
```bash
# 1. å¥åº·æ£€æŸ¥
curl http://localhost:8000/health
# âœ… è¿”å›: {"status":"ok","message":"å¹¿å‘ŠçŸ¥è¯†å›¾è°±ç³»ç»Ÿè¿è¡Œä¸­"}

# 2. äº‹ä»¶ç»Ÿè®¡
curl http://localhost:8000/api/v1/events/stats
# âœ… è¿”å›: {"code":0,"data":{"total_events":0,...}}

# 3. åºåˆ—æŒ–æ˜
curl -X POST http://localhost:8000/api/v1/mining/mine \
  -H "Content-Type: application/json" \
  -d '{"algorithm":"prefixspan","min_support":2,"max_length":5,"top_k":10}'
# âœ… è¿”å›: å‘ç°2ä¸ªé«˜é¢‘æ¨¡å¼
```

### å‰ç«¯é¡µé¢æµ‹è¯•
- âœ… é¡µé¢æ­£å¸¸åŠ è½½
- âœ… å‚æ•°é…ç½®æ­£å¸¸
- âœ… è¿›åº¦æ˜¾ç¤ºæ­£å¸¸
- âœ… ç»“æœå±•ç¤ºæ­£å¸¸
- âœ… é”™è¯¯æç¤ºæ­£å¸¸

---

## ğŸ¯ ä½¿ç”¨æµç¨‹

### 1. å‡†å¤‡æ•°æ®
```
åŸºç¡€å»ºæ¨¡ â†’ å¯¼å…¥è¡Œä¸ºæ•°æ®
    â†“
äº‹ä»¶æŠ½è±¡ â†’ æå–äº‹ä»¶åºåˆ—
    â†“
é«˜é¢‘å­åºåˆ—æŒ–æ˜ â†’ å‘ç°æ¨¡å¼
```

### 2. æ“ä½œæ­¥éª¤
1. è®¿é—®"é«˜é¢‘å­åºåˆ—æŒ–æ˜"é¡µé¢
2. é€‰æ‹©ç®—æ³•ï¼ˆPrefixSpanæˆ–Attentionï¼‰
3. é…ç½®å‚æ•°ï¼š
   - æœ€å°æ”¯æŒåº¦ï¼šå»ºè®®2-5
   - æœ€å¤§åºåˆ—é•¿åº¦ï¼šå»ºè®®3-5
   - è¿”å›æ¨¡å¼æ•°é‡ï¼šå»ºè®®10-20
4. ç‚¹å‡»"å¼€å§‹æŒ–æ˜"
5. æŸ¥çœ‹æŒ–æ˜ç»“æœå’Œç»Ÿè®¡ä¿¡æ¯
6. é€‰æ‹©æ„Ÿå…´è¶£çš„æ¨¡å¼ä¿å­˜
7. æŸ¥çœ‹æ¨¡å¼ç¤ºä¾‹ï¼ˆå¯é€‰ï¼‰

---

## ğŸ“ æ³¨æ„äº‹é¡¹

### 1. æ•°æ®ä¾èµ–
- å¿…é¡»å…ˆåœ¨"äº‹ä»¶æŠ½è±¡"é¡µé¢è¿›è¡Œäº‹ä»¶æå–
- å¦‚æœæ²¡æœ‰äº‹ä»¶æ•°æ®ï¼Œé¡µé¢ä¼šæ˜¾ç¤ºæç¤ºä¿¡æ¯

### 2. å‚æ•°è°ƒä¼˜
- **æœ€å°æ”¯æŒåº¦**ï¼šå€¼è¶Šå¤§æ‰¾åˆ°çš„æ¨¡å¼è¶Šå°‘ä½†è¶Šå¯é 
- **æœ€å¤§åºåˆ—é•¿åº¦**ï¼šå»ºè®®3-5ï¼Œè¿‡å¤§ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™
- **è¿”å›æ¨¡å¼æ•°é‡**ï¼šæ ¹æ®éœ€è¦è°ƒæ•´

### 3. é”™è¯¯å¤„ç†
- æ‰€æœ‰APIéƒ½æœ‰è¯¦ç»†çš„é”™è¯¯æ—¥å¿—
- å‰ç«¯ä¼šæ˜¾ç¤ºæ˜ç¡®çš„é”™è¯¯æç¤º
- åç«¯æ—¥å¿—è®°å½•åœ¨ `backend/logs/adsagent.log`

---

## ğŸ” åç»­ä¼˜åŒ–å»ºè®®

### 1. åŠŸèƒ½å¢å¼º
- [ ] æ”¯æŒæ›´å¤šç®—æ³•ï¼ˆLSTMã€Transformerï¼‰
- [ ] æ¨¡å¼å¯è§†åŒ–ï¼ˆæµç¨‹å›¾ã€å…³ç³»å›¾ï¼‰
- [ ] æ¨¡å¼å¯¼å‡ºï¼ˆCSVã€Excelï¼‰
- [ ] æ¨¡å¼å¯¹æ¯”åˆ†æ

### 2. æ€§èƒ½ä¼˜åŒ–
- [ ] å¤§æ•°æ®é‡åˆ†æ‰¹å¤„ç†
- [ ] ç»“æœç¼“å­˜
- [ ] å¼‚æ­¥æŒ–æ˜ä»»åŠ¡

### 3. ç”¨æˆ·ä½“éªŒ
- [ ] å‚æ•°æ¨èï¼ˆæ ¹æ®æ•°æ®è‡ªåŠ¨æ¨èï¼‰
- [ ] å†å²è®°å½•æŸ¥çœ‹
- [ ] æ¨¡å¼æ”¶è—åŠŸèƒ½

---

## ğŸ“‚ ç›¸å…³æ–‡ä»¶

### å‰ç«¯
- [frontend/src/views/SequenceMining.vue](file:///home/linxiankun/adsagent/frontend/src/views/SequenceMining.vue) - é¡µé¢ç»„ä»¶
- [frontend/src/router/index.js](file:///home/linxiankun/adsagent/frontend/src/router/index.js) - è·¯ç”±é…ç½®
- [frontend/src/App.vue](file:///home/linxiankun/adsagent/frontend/src/App.vue) - èœå•é…ç½®

### åç«¯
- [backend/app/api/sequence_mining_routes.py](file:///home/linxiankun/adsagent/backend/app/api/sequence_mining_routes.py) - APIè·¯ç”±
- [backend/app/services/sequence_mining.py](file:///home/linxiankun/adsagent/backend/app/services/sequence_mining.py) - æœåŠ¡å±‚
- [backend/app/api/event_extraction_routes.py](file:///home/linxiankun/adsagent/backend/app/api/event_extraction_routes.py) - äº‹ä»¶ç»Ÿè®¡API

---

**å¼€å‘æ—¶é—´**: 2026-02-20  
**å¼€å‘ç‰ˆæœ¬**: v2.1.0  
**å¼€å‘äººå‘˜**: Claude AI Assistant
