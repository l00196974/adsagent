# è½¬åŒ–è¡Œä¸ºæ•°æ®çŠ¶æ€æŠ¥å‘Š

## æ•°æ®ç”Ÿæˆæ—¶é—´
2026-02-24 09:56:46

## âœ… åŸå§‹æ•°æ®ä¸­çš„è½¬åŒ–è¡Œä¸º

### ç»Ÿè®¡ä¿¡æ¯
- **æ€»ç”¨æˆ·æ•°**: 500
- **æ€»è¡Œä¸ºæ•°**: 48,437
- **è½¬åŒ–è¡Œä¸ºæ€»æ•°**: 4,587 (9.5%)

### è½¬åŒ–è¡Œä¸ºåˆ†å¸ƒ

| è¡Œä¸ºç±»å‹ | æ•°é‡ | ç”¨æˆ·æ•° | è¯´æ˜ |
|---------|------|--------|------|
| visit_poi | 4,467 | 499 | åˆ°åº—è®¿é—®ï¼ˆ4Såº—ã€ç»é”€å•†ç­‰ï¼‰ |
| add_cart | 61 | 20 | åŠ å…¥è´­ç‰©è½¦ |
| purchase | 59 | 20 | è´­ä¹°æˆäº¤ |

### è½¬åŒ–æ¼æ–—
```
æ€»ç”¨æˆ·: 500
  â†“
åˆ°åº—ç”¨æˆ·: 499 (99.8%)
  â†“
åŠ è´­ç”¨æˆ·: 20 (4.0%)
  â†“
è´­ä¹°ç”¨æˆ·: 20 (4.0%)
```

### è½¬åŒ–ç‡
- **åˆ°åº—è½¬åŒ–ç‡**: 99.8% (499/500)
- **åŠ è´­è½¬åŒ–ç‡**: 4.0% (20/500)
- **è´­ä¹°è½¬åŒ–ç‡**: 4.0% (20/500)
- **åŠ è´­åˆ°è´­ä¹°è½¬åŒ–ç‡**: 96.7% (59/61)

## ğŸ“Š ç¤ºä¾‹ï¼šè´­ä¹°ç”¨æˆ·çš„è¡Œä¸ºåºåˆ—

```
browse â†’ use_app â†’ use_app â†’ visit_poi â†’ browse â†’ browse â†’ browse â†’ 
visit_poi â†’ use_app â†’ use_app â†’ use_app â†’ use_app â†’ visit_poi â†’ 
browse â†’ browse â†’ visit_poi â†’ browse â†’ visit_poi â†’ visit_poi â†’ 
browse â†’ ... â†’ add_cart â†’ purchase
```

**ç‰¹å¾**ï¼š
- å¤šæ¬¡æµè§ˆï¼ˆbrowseï¼‰
- é¢‘ç¹ä½¿ç”¨APPï¼ˆuse_appï¼‰
- å¤šæ¬¡åˆ°åº—ï¼ˆvisit_poiï¼‰
- æœ€ç»ˆåŠ è´­ï¼ˆadd_cartï¼‰å¹¶è´­ä¹°ï¼ˆpurchaseï¼‰

## ğŸ¯ äº‹ä»¶æŠ½å–åçš„é¢„æœŸæ•ˆæœ

åŸå§‹è¡Œä¸ºç»è¿‡ LLM æŠ½å–åï¼Œåº”è¯¥è¢«æ ‡æ³¨ä¸ºï¼š

| åŸå§‹è¡Œä¸º | æŠ½å–åçš„äº‹ä»¶ | äº‹ä»¶åˆ†ç±» |
|---------|-------------|----------|
| purchase | è´­ä¹° | conversion |
| add_cart | åŠ è´­ | conversion |
| visit_poi (4Såº—) | åˆ°åº— | conversion |
| browse | æµè§ˆè½¦å‹ | engagement |
| use_app | ä½¿ç”¨APP | engagement |
| search | æœç´¢ | engagement |

## ğŸ” éªŒè¯æ­¥éª¤

### 1. éªŒè¯åŸå§‹æ•°æ®
```bash
python3 -c "
import sqlite3
conn = sqlite3.connect('data/graph.db')
cursor = conn.cursor()
cursor.execute('''
    SELECT action, COUNT(*) 
    FROM behavior_data 
    WHERE action IN ('purchase', 'add_cart', 'visit_poi')
    GROUP BY action
''')
for row in cursor.fetchall():
    print(f'{row[0]}: {row[1]}')
conn.close()
"
```

### 2. æŠ½å–äº‹ä»¶å¹¶éªŒè¯åˆ†ç±»
```bash
# å¯åŠ¨åç«¯æœåŠ¡
cd backend && python main.py

# æŠ½å–ä¸€ä¸ªè´­ä¹°ç”¨æˆ·çš„äº‹ä»¶
curl -X POST http://localhost:8000/api/v1/events/extract/user_0001

# æ£€æŸ¥äº‹ä»¶åˆ†ç±»
python3 -c "
import sqlite3
conn = sqlite3.connect('data/graph.db')
cursor = conn.cursor()
cursor.execute('''
    SELECT event_type, event_category 
    FROM extracted_events 
    WHERE user_id = 'user_0001'
''')
for row in cursor.fetchall():
    print(f'{row[0]}: {row[1]}')
conn.close()
"
```

### 3. æµ‹è¯•ç›®æ ‡å¯¼å‘æŒ–æ˜
```bash
# æŒ–æ˜å¯¼å‘"è´­ä¹°"çš„è¡Œä¸ºè·¯å¾„
curl -X POST http://localhost:8000/api/v1/mining/mine \
  -H "Content-Type: application/json" \
  -d '{
    "target_event": "è´­ä¹°",
    "min_support": 2,
    "min_length": 2,
    "max_length": 5
  }'
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **éœ€è¦é‡æ–°æŠ½å–äº‹ä»¶**ï¼šç”±äºä¿®æ”¹äº† LLM promptï¼Œéœ€è¦æ¸…ç©º `extracted_events` å’Œ `event_sequences` è¡¨ï¼Œç„¶åé‡æ–°æŠ½å–æ‰€æœ‰ç”¨æˆ·çš„äº‹ä»¶ã€‚

2. **LLM è¯†åˆ«å‡†ç¡®æ€§**ï¼šLLM éœ€è¦æ­£ç¡®è¯†åˆ«åŸå§‹è¡Œä¸ºä¸­çš„è½¬åŒ–è¡Œä¸ºï¼ˆpurchaseã€add_cartã€visit_poiï¼‰å¹¶æ ‡æ³¨ä¸º `conversion` åˆ†ç±»ã€‚

3. **æ•°æ®é‡è¦æ±‚**ï¼šç›®å‰åªæœ‰ 20 ä¸ªè´­ä¹°ç”¨æˆ·ï¼ŒæŒ–æ˜æ—¶éœ€è¦è®¾ç½®è¾ƒä½çš„ `min_support`ï¼ˆå»ºè®® 2-3ï¼‰æ‰èƒ½å‘ç°æ¨¡å¼ã€‚

4. **æ‰¹é‡æŠ½å–å»ºè®®**ï¼šä½¿ç”¨æ‰¹é‡æŠ½å–æ¥å£å¤„ç†æ‰€æœ‰ 500 ä¸ªç”¨æˆ·ï¼Œä»¥è·å¾—æ›´å®Œæ•´çš„äº‹ä»¶æ•°æ®ã€‚

## ğŸ“ å¿«é€Ÿæµ‹è¯•è„šæœ¬

è¿è¡Œä»¥ä¸‹è„šæœ¬è¿›è¡Œå®Œæ•´æµ‹è¯•ï¼š
```bash
./test_target_mining.sh
```

è¯¥è„šæœ¬ä¼šï¼š
1. âœ“ éªŒè¯åŸå§‹æ•°æ®ä¸­çš„è½¬åŒ–è¡Œä¸º
2. âœ“ æ£€æŸ¥æ•°æ®åº“ event_category å­—æ®µ
3. âœ“ æ£€æŸ¥åç«¯æœåŠ¡çŠ¶æ€
4. âœ“ æ¸…ç©ºæ—§çš„äº‹ä»¶æ•°æ®
5. âœ“ æŠ½å–ä¸€ä¸ªè´­ä¹°ç”¨æˆ·çš„äº‹ä»¶
6. âœ“ éªŒè¯äº‹ä»¶åˆ†ç±»æ˜¯å¦æ­£ç¡®

## ğŸ‰ æ€»ç»“

âœ… **åŸå§‹æ•°æ®å·²åŒ…å«è½¬åŒ–è¡Œä¸º**ï¼ˆpurchaseã€add_cartã€visit_poiï¼‰
âœ… **æ•°æ®ç”Ÿæˆè„šæœ¬æ­£ç¡®**ï¼ˆåŒ…å«å››é˜¶æ®µè¡Œä¸ºæ¨¡å‹ï¼‰
âœ… **æ•°æ®å·²åˆ·æ–°**ï¼ˆ500 ä¸ªç”¨æˆ·ï¼Œ48,437 æ¡è¡Œä¸ºï¼‰
âœ… **è½¬åŒ–è¡Œä¸ºå……è¶³**ï¼ˆ4,587 æ¡è½¬åŒ–è¡Œä¸ºï¼Œå æ¯” 9.5%ï¼‰

**ä¸‹ä¸€æ­¥**ï¼šé‡æ–°æŠ½å–æ‰€æœ‰ç”¨æˆ·çš„äº‹ä»¶ï¼ŒéªŒè¯ LLM æ˜¯å¦æ­£ç¡®æ ‡æ³¨è½¬åŒ–è¡Œä¸ºã€‚
